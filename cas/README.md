Прототип использования Enterprise Single Sign-On
================================================ 

Описание модулей
-----------

* ``cas-overlay``: CAS сервер
* ``frontend-accounting``: фронтед, предоставляющий кнопку для переадресации на страницу авторизации SSO
системы с последующим редиректом назад на форму информации по авторизованному пользователю полученную из `backend`
приложения.

Представлены следующие возможности:

* Авторизация пользователей из локальной БД на примере ``PostgreSQL``.
* Авторизация через поддерживаемые социальные сети на примере ``Google+``.
* Подключение кастомного провайдера авторизации на примере социально сети ``Вконтакте``.
* Двухфазовая авторизация на примере ``Google Authenticator``.

Сборка и настройка проекта
-----------

* Перед сборкой сервера ознакомьтесь с параметрами сервера CAS. Установите актуальные значения.

    Параметры CAS сервера конфигурируются файлами в директории `./cas-overlay/etc/cas/config`
    
    1. `application.yml`: конфигурации добавленных расширений. Выставьте параметры клиента `Вконтакте`
    для `OAuth 2.0` авторизации через Вконтакте. (см. Delegated Authentication - https://apereo.github.io/cas/5.2.x/integration/Delegate-Authentication.html)
    
    2. `log4j2.xml`: параметры уровня логирования компонентов CAS сервера.
    
    3. `cas.properties`: параметры CAS сервера.
    
        Описание параметров см. CAS Properties - https://apereo.github.io/cas/5.2.x/installation/Configuration-Properties.html
        
        Параметры на которые надо обратить внимание:
        
        * `cas.server.name` адресс на котором будет поднят сервер CAS
        * `cas.authn.jdbc.query[0].*`: доступ к локальной БД пользователей.
        * `cas.authn.attributeRepository.jdbc[0].*`: доступ к локальной БД атрибутов пользователей
        * `cas.authn.mfa.globalProviderId=mfa-gauth`: глобальная активация двухфакторной авторизации `Google Authenticator`.
        * `cas.authn.mfa.gauth.jpa.database.*`: БД в которой `Google Authenticator` будет сохранять ключи двухфакторной авторизации.
        * `cas.authn.pac4j.google.*`: клиент `Google+` для для `OAuth 2.0` авторизации.
    
    4. Обратите внимания, что используется 5.3.0-RC1-SNAPSHOT версия CAS сервера, возможна не стабильная работа.
    Также были добавлены фиксы помеченные `Fix-CAS-RC1-version-bug` ярлыком.
    Использование данной версии обусловлено исправлением критического бага в OpenID Connect протоколе последней стабильной версии 5.2.2.
    

* Соберите и поднимите CAS overlay согласно инструкции в `./cas-overlay/README.md`.
